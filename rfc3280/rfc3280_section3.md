## 3. Overview of Approach

다음은 PKIX 명세에서 가정한 아키텍쳐 모델의 단순화된 관점이다. 

<b> 모델의 구성 요소 </b>   
| 구성 요소 | 의미 |
|--- | ---| 
| end entity | PKI 인증서 사용자 및/또는 인증서의 주체인 최종 사용자 시스템 |
| CA | 인증 기관 |
| RA | 등록 기관 (CA가 특정 관리 기능을 위임하는 선택적 시스템) |
| CRL issuer | CA가 인증서 폐지 목록의 발행을 위임하는 선택적 시스템 |
| repository | 인증서나 CRL을 저장하거나 이를 end entity에게 배포하기 위한 수단으로 사용하는 분산 시스템 |

속성 기관(AA) CRL 발행자에게 CRL의 발행을 위임할 수 있다.

### 3.1 X.509 Version3 Certification

공개키 사용자는 암호화나 전자서명 매커니즘을 사용할  올바른 원격 주인(개인 또는 시스템)이 개인키를 소유했음을 신뢰하고자 한다. 공개키 값을 주체와 연결짓는 자료구조인 공개키 인증서 사용을 통해 확신을 줄 수 있다. 이 연결은 신뢰할 수 있는 CA가 각 인증서에 디지털 서명을 함으로써 단언된다. CA는 이를 기술적 수단(Challenge-Response 프로토콜을 통한 소유의 증거), 개인키의 제시, 주체의 주장에 근거한다. 서명된 내용에 나타나는 인증서의 유효 기간은 제한되어 있다. 이는 인증서의 서명과 적시성은 인증서 사용 고객이 독립적으로 확인하거나, 신뢰할 수 없는 통신이나 서버 시스템을 통해 인증서가 배포되거나, 안전하지 않은 저장공간에 캐싱될 수 있기 때문이다. 

1988년 X.500 디렉토리 권장사항의 일부로써 처음 게시된 ITU-T X.509 혹은 ISO/IEC 9594-8은 X.509 표준 인증서 형식을 정의했다. 1988년의 인증서 형식이 version1(v1) 포멧이다. 1993년에 2개의 필드가 추가되며 개정된 X.500이 version2(v2) 형식이다. 

1993년에 게시된 인터넷 Privacy Enhanced Mail(PEM) RFC는 X.509 v1 인증서 RFC1422에 근거한 PKI 명세를 포함하고 있다. RFC1422를 배포하려는 시도를 통해 v1과 v2 인증서 형식이 몇몇 측면에서 부족하다는 사실이 명확해졌다. 가장 중요한 것은 PEM 설계와 구현 경험이 필요하다고 입증된 정보를 전달하기 위한 더 많은 필드가 필요하다는 것이다. 이런 새로운 요구사항에 따라, ISO/IEC, ITU-T와 ANSI X9는 X.509 version3(v3) 인증서 형식을 개발했다. v3는 v2 포맷에 추가 확장 필드에 대한 조항을 추가하여 확장시켰다. 특정 확장 필드 타입은 표준에서 지정되거나, 기관 혹은 커뮤니티에서 정의 및 등록될 수 있다. 1996 6월, 기본 포맷의 X.509 v3 표준이 완성되었다. 

ISO/IEC, ITU-T와 ANSI X9은 v3 확장 필드 X.509, X9.55에서 쓰기 위한 표준 확장을 발전시켰다. 이러한 확장을 통해 추가 주체 식별 정보, 키 속성 정보, 정책 정보, 그리고 인증서 경로 제약 조건과 같은 데이터를 전달할 수 있다. 

그러나 ISO/IEC, ITU-T와 ANSI X9 표준 확장은 적용 범위가 너무 넓다. 인터넷에서 사용하기 위한 X.509 v3 시스템의 상호 운용 가능한 구현을 위해서 인터넷에 맞게 조정된 X.509 v3 확장 사용을 위한 프로필 지정이 필요하다. 본 문서의 목적 중 하나가 인터넷 WWW, 전자 메일, IPsec 애플리케이션을 위한 프로필 구체화이다. 추가 요구조건이 있는 환경은 이 프로필을 기반으로 구축 하거나 대체할 수 있다. 

### 3.2 Certification Paths and Trust

공개 키에 대한 지식을 요구하는 보안 서비스의 사용자는 인증서가 요구되는 공개키를 포함하고 있는지 인증서를 획득하고 검증해야한다. 공개키 사용자가 인증서에 서명한 CA의 공개키, CA 이름, 연관된 정보(유효기간, 이름 제약조건 등)의 확실한 사본을 가지고 있지 않은 경우 해당 공개키를 획득하기 위해 추가 인증서가 필요할 수 있다. 일반적으로 하나의 CA로부터 서명된 공개키 주인(end entity)의 인증서, 0개 이상의 다른 추가 CA가 서명한 CA의 인증서로 구성되어 있는 다수의 인증서 체인이 필요하다. 이러한 체인을 <b>certification paths</b>라고 부르는데, 공개키 사용자는 제한된 수의 증명된 CA 공개 키로만 초기화 될 수 있기 때문에 필요성이 요구된다. 

공개키 사용자가 certification path를 찾기 위한 CA 구성에는 몇 개의 다른 방식이 있다. RFC 1422는 PEM을 위한 CA의 계층적 구조에 대해 정의하고 있다.    

PEM 인증 기관에는 3가지 종류가 있다.    
 (a) Internet Policy Registration Authority(IPRA)    
인터넷 협회의 후원으로 운영되는 이 기관은, PEM 인증 계층의 Level 1로서 루트의 역할을 수행한다. 이 기관은 다음 레벨 기관인 PCA를 대상으로만 인증서를 발행한다. 모든 인증 경로는 IPRA로부터 시작한다. 

(b) Policy Certification Authorities(PCA)   
PCA는 인증 경로 계층의 level 2이며, 각 PCA는 IPRA로부터 인증된다. PCA는 인증 사용자 또는 하위 인증 기관에 대한 정책 설명서를 수립 및 발표해야한다. 각 PCA는 서로 다른 이용자 요구를 충족시키는데 목표를 둔다. 예를 들어, 상업기관의 일반적인 전자 메일 요구 사항을 지원하는 PCA, 법적으로 구속력있는 디지털 서명 요구 사항을 충족하도록 설계된 엄격한 정책을 가진 PCA가 각각 있을 수 있다.

(c) Certification Authorities(CA)   
CA는 계층적 구조에서 level 3 또는 그 이하이다. CA들은 PCA로부터 공인받는다. CA는 특정 조직, 특정 조직 단위 또는 특정 지리적 영역을 나타낸다. 

RFC 1422는 CA가 CA자체의 이름에 종속되는 엔티티에 대한 인증서만 발급할 수 있도록 요구하는 이름 종속 규칙을 갖는다. PEM 인증 경로는 PCA이름에 의해 암시된다. 이름 종속 규칙은 PCA 아래의 CA가 인증할 수 있는 하위 엔티티 집합에 대해 합리적으로 제한한다.(기관의 CA는 해당 기관의 이름 tree에 있는 엔티티만 인증할 수 있다.) 인증서 사용자 시스템은 이름 종속 규칙이 준수되어 있는지 기계적으로 확인할 수 있다. 

RFC 1422는 X.509 v1 인증서 형식을 사용한다.  X.509 v1의 한계는 정책 정보를 명확하게 연관시키거나 인증서의 사용을 제한시키기 위한 몇가지 구조적으로 제한하는데 있다. 제한 사항은 아래와 같다.    

제한 사항    
(a) 모든 인증 절차는 IPRA로부터 시작하는 하향식(top-down) 계층이다

(b) CA 주체를 제한하는 이름 종속 규칙

(c) 개별 PCA에 대한 지식을 인증서 체인 검증 논리에 포함시켜야하는 PCA 개념의 사용. 개별 PCA에 대한 지식은 체인 수용 여부를 결정짓는데 사용된다. 

RFC 1422에서 다루는 대부분의 요구사항은 X.509 v3를 통해 사용되고 있는 CA 구조를 제한할 필요 없이 인증서 확장으로 해결할 수 있다. 특히 인증서 정책과 관련된 인증서 확장은 PCA의 필요성을 없애주고 이름 종속 규칙의 필요성을 없애준다. 그 결과, 이 문서는 더욱 유연한 구조를 지원한다. 

유연한 구조    
(a) 인증 경로는 사용자 자신의 도메인에 있는 CA의 공개 키로 시작하거나 계층 구조 최상단의 공개 키로 시작한다. 사용자 자신의 도메인에 있는 CA의 공개키로 시작하는 인증경로는 몇 가지 장점을 가진다. 일부 환경에서는, 로컬 도메인을 가장 신뢰한다. 

(b) 이름 종속규칙은 인증서에 이름 종속 규칙 확장을 명시적으로 포함함으로써 부과할 수 있지만, 필수사항이 아니다. 

(c) 정책 확장 및 정책 매핑은 PCA 개념을 대체하여 더 높은 수준의 자동화를 허용한다. 애플리케이션은 PCA에 대한 선험적 지식 대신 인증서의 내용을 기반으로 인증 경로가 허용 가능한지 판단할 수 있다. 이를 통해 인증 경로 처리를 자동화할 수 있다.

### 3.3 Revocation

인증서가 발급되면, 유효기간 전체동안 인증서가 사용될 것으로 간주된다. 그러나 여러 가지 상황으로 인해 유효 기간이 만료되기 전에 인증서가 무효화될 수 있다. 이러한 상황에는 이름 변경, 주체와 CA 간의 연관성 변경(예: 직원이 조직과 함께 고용을 종료함), 해당 개인 키의 손상 또는 의심스러운 손상 등이 포함된다. 이러한 상황에서 CA는 인증서를 해지해야 한다.

X.509는 인증서 해지의 방법을 정의한다. 위 방법은 `인증서 해지 리스트(CRL)이라고 부르는 CA가 주기적으로 발급하는 서명된 데이터 구조를 포함한다. CRL은 CA 또는 CRL 발급자가 서명하고 공용 저장소에서 자유롭게 사용할 수 있는 해지된 인증서를 식별하는 타임스탬프 목록`이다. 해지된 각 인증서는 인증서 일련 번호(`serial number`)로 CRL에서 식별된다. 인증서를 사용하는 시스템(예로, 원격 사용자의 디지털 서명 확인)이 인증서를 사용할 때, 시스템은 인증서의 서명과 유효성을 확인할 뿐 아니라, 적절한 최근의 CRL을 획득하여 CRL내에 해당 인증서의 일련번호가 없음을 확인한다. "적절한 최근"의 의미는 정책에 따라 다양할 수 있는데, 주로 가장 최근 발행된 CRL을 의미한다. 새로운 CRL은 주기적(예로, 매시간, 매일, 매주)으로 발행된다. 해지된 인증서 정보는 취소 통지에 이어 다음 업데이트의 일부로 항목이 CRL에 추가된다. 해지된 인증서 정보는 인증서의 유효기간을 초과하여 CRL이 발급될 때까지 CRL에서 절대 삭제 되지 않는다. 

이 취소 방법의 장점은 CRL이 인증서 자체와 정확히 동일한 수단, 즉 신뢰할 수 없는 서버와 신뢰할 수 없는 통신을 통해 배포될 수 있다는 것이다.(어느 곳이든 배포될 수 있어 사용가능하다는 점이다.) 

신뢰할 수 없는 통신 및 서버를 사용하는 CRL 해지 방법의 한 가지 제한 사항은 해지 시간 세분성이 CRL 발급 기간으로 제한된다는 것이다. 예를 들어, 해지가 지금 보고되었다면, 현재 발급된 모든 CRL이 업데이트될 때까지 해당 취소는 인증서 사용 시스템에 안정적으로 통지되지 않을 것이다 -- CRL 발급 빈도에 따라 한 시간, 하루, 한 주가 소요될 수 있다. 

X.509 v3 인증서 형식과 마찬가지로, 여러 공급업체의 상호 운용 가능한 구현을 용이하게 하기 위해, X.509 v2 CRL 형식을 인터넷 사용을 위해 프로파일링해야 한다. 본 문서에서는 프로파일을 특정한다. 그러나 이 프로파일은 CRL을 발급할 필요가 없다. 온라인 해지 알림을 지원하는 메시지 형식과 프로토콜은 다른 PKIX 사양에 정의되어 있다. X.509 CRL의 대안으로 일부 환경에서 `온라인 해지 알림 방법`을 적용할 수 있다. 온라인 해지 검사는 해지 보고서와 의존 당사자에게 정보를 배포하는 사이의 대기 시간을 상당히 줄일 수 있다. CA가 해지 보고서를 인증하고 유효한 것으로 받아들이면, 온라인 서비스에 대한 모든 쿼리는 해지 인증서 유효성 검사 영향을 올바르게 반영한다. 그러나, 이러한 방식은 새로운 보안 요구사항을 부과한다 : 인증서 유효성 검사자는 온라인 유효성 검사 서비스를 신뢰해야하지만, 리포지토리는 신뢰할 필요가 없다.

### 3.4 Operational Protocols

Operational Protocol은 인증서와 CRL(또는 상태 정보)을 인증서 사용 클라이언트 시스템에 전달한다. LDAP, HTTP, FTP와 X.500을 기반으로 한 배포 방식을 포함한 다양한 서로 다른 인증서 및 CRL 전달 방식을 위해 규정이 필요하다. 이런 역할을 지원하는 Operational protocol은 다른 PKIX 사양에 정의되어 있다. 이 사양에는 적절한 MIME 콘텐트 타입에 대한 정의 또는 참조를 포함한 위의 모든 운영 환경을 지원하기 위한 메시지 형식 및 절차가 포함될 수 있다. 

### 3.5 Management Protocols

Management protocol은 PKI 유저와 관리 개체 간 온라인 상호작용을 지원한다. 예를 들어, management protocol은 키 쌍으로 연관된 CA와 클라이언트 시스템 간 또는 서로 교차인증하는 두 CA 간에 사용된다. Manage protocol에 의해 잠재적으로 지원되어야 하는 기능들은 다음과 같다 :

(a) 등록 : CA가 해당 사용자에 대한 인증서 발급 또는 인증을 하기 전에 사용자가 CA 또는 RA에 자기 자신을 알린다.

(b) 초기화 : 클라이언트 시스템이 안전하게 작동하기 전에 인프라의 다른 곳에 저장된 키와 적절한 관계가 있는 키 재료를 설치해야한다. 예를 들어, 신뢰할 수 있는 CA의 공개 키 및 기타 확실한 정보를 사용하여 클라이언트를 안전하게 초기화해야 인증서 경로 유효성 검사에 사용될 수 있다. 
또한, 클라이언트는 일반적으로 자체 키 쌍을 사용하여 초기화해야 한다. 

(c) 키 쌍 복구 : 선택적으로, 사용자 클라이언트 키 재료(예: 암호화 목적으로 사용되는 사용자의 개인 키)는 CA 또는 키 백업 시스템에 의해 백업될 수 있다. 만약 사용자가 백업된 키 재료(예: 잊어버린 암호 또는 잃어버린 키 체인 파일의 결과)를 복구하고자 한다면, 이를 지원하기 위해 온라인 프로토콜 교환이 필요할 수 있다. 

(e) 키 쌍 업데이트 : 모든 키 쌍은 새로운 키 쌍으로 교체 또는 새 인증서 발급 등 정기적으로 업데이트되어야 한다. 

(f) 폐지 요청 : 공인된 작업자는 인증서 취소가 필요한 비정상적 상황에 대해 CA에게 조언해야 한다. 

(g) 상호 인증 : 두 CA는 교차 인증서를 설정하는데 사용되는 정보를 교환한다. 교차 인증서는 한 CA에서 다른 CA로 발급한 인증서로, 인증서 발급에 사용되는 CA 서명 키를 포함한다. 

온라인 프로토콜이 위의 기능을 시행하는 유일한 방법은 아니다. 모든 기능에는 동일한 결과를 얻기 위한 오프라인 방법이 있으며, 이 규격은 온라인 프로토콜의 사용을 의무화하지 않는다. 예를 들어, 하드웨어 토큰이 사용될 때, 많은 기능들이 물리적 토큰 전달의 일부로서 달성될 수 있다. 특히 등록, 초기화, 인증 기능 중 2개 이상을 하나의 프로토콜 교환으로 결합할 수 있다.

PKIX 시리즈 사양은 위의 기능을 지원하는 표준 메시지 형식 집합을 정의한다. 다양한 환경(예: 이메일, 파일 전송 및 WWW)에서 이러한 메시지를 전달하기 위한 프로토콜이 이러한 사양에 설명되어있다.

